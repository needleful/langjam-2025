<!DOCTYPE html>
<html>
	<head>
		<title>Duet</title>
		<style>
			#main-content {
				display:flex;
			}
			#editor {
				flex:1.6;
			}
			#file-panel {
				flex:0.5;
			}
			#editor-root {
				position:relative;
				height: 400pt;
			}
			.code-container {
				margin: 10px;
				padding: 10px;
				border: 0;
				width: calc(100% - 32px);
				height: 400pt;
				position: absolute;
				top: 0;
				left: 0;
				overflow: scroll;
				white-space: pre;
			}
			#editor-text {
				z-index: 1;
				color: transparent;
				background: transparent;
				caret-color: black;
				resize: none;
			}

			.code-operator, .code-digits, .code-period, .code-escapedStringText {
				font-weight:bold;
			}
			.code-invalid {
				text-decoration: wavy underline;
				color: red;
			}
			.code-comment {
				font-style: italic;
				color: #333;
			}
			.code-quote, .code-stringText {
				font-style: italic;
			}
		</style>
		<script type="text/javascript" src='/duet.js'></script>
		<script type="text/javascript">
			Duet.loadObject('/duet/game.duet').then(() => {
				Duet.loadObject('/duet/player.duet').then(Duet.compile);
			});
		</script>
	</head>
	<body>
		<h1>Langjam Gamejam entry: Duet</h1>
		<canvas id="game-canvas" width="800" height="600">
		</canvas>
		<h2>Editor</h2>
		<h4 id='current-file'>Editing a new file</h4>
		<div id='main-content'>
			<div id="editor">
				<div id='editor-root'>
					<textarea id="editor-text" class='code-container' rows="20" 
						aria-hint="The keyboard can be captured by the text editor. Press escape to toggle this behavior." spellcheck="false"
						oninput="Duet.lex(false)" onscroll="sync_scroll()">#Type code here</textarea>
					<pre id="highlighting" class='code-container' aria-hidden="true" tabindex='-1'><code id="highlighting-content" class='code-fonts'></code></pre>
				</div>
				<br></br>
				<p id='editor-status'>Tab Captured. Press Escape to Toggle</p>
				<button onclick="Duet.compile()">Compile and Run</button>
			</div>
			<div id='file-panel'>
				<h3>Files</h3>
				<input id='new-file-name' type='text' value='newFile.duet'/>
				<ul id='files-list'>
					
				</ul>
				<button onclick='Duet.createFile()'>Create File</button>
			</div>
		</div>
		<script type="text/javascript" src="/editor.js"></script>
	</body>
</html>